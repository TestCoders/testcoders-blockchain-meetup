language: node_js
node_js:
  - "stable"

cache:
  directories:
    - node_modules

before_install:
  - npm install -g truffle ethereumjs-testrpc

jobs:
  include:
    - stage: start testrpc
      install: skip
      script: 
        - testrpc > /dev/null &
        - sleep 5
    - stage: truffle migrate
      install: skip
      script: truffle migrate
    - stage: test
      install: skip
      script: truffle test
